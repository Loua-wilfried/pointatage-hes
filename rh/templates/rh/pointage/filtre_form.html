{% if employes|length == 0 or fonctions|length == 0 or agences|length == 0 %}
  <div class="alert alert-warning">Aucune donnée pour les filtres :
    employes={{ employes|length }}, fonctions={{ fonctions|length }}, agences={{ agences|length }}
  </div>
{% endif %}
<form method="get" class="filter-bar d-flex flex-nowrap align-items-end mb-4 border rounded-3 p-3 bg-white shadow-sm" id="filtre-form" style="font-size:1rem;">
  <div class="col">
    <label class="form-label fw-bold text-primary">Employé</label>
    <select class="form-select" name="employe">
      <option value="">Tous</option>
      {% for e in employes %}
        <option value="{{ e.id }}" {% if request.GET.employe == e.id|stringformat:'s' %}selected{% endif %}>{{ e }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Fonction</label>
    <select class="form-select" name="fonction">
      <option value="">Toutes</option>
      {% for f in fonctions %}
        <option value="{{ f.id }}" {% if request.GET.fonction == f.id|stringformat:'s' %}selected{% endif %}>{{ f.nom_role }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Agence</label>
    <select class="form-select" name="agence">
      <option value="">Toutes</option>
      {% for a in agences %}
        <option value="{{ a.id }}" {% if request.GET.agence == a.id|stringformat:'s' %}selected{% endif %}>{{ a.nom }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Date</label>
    <input class="form-control" type="date" name="date" value="{{ request.GET.date }}">
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Heure min</label>
    <input class="form-control" type="time" name="heure_min" value="{{ request.GET.heure_min }}">
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Heure max</label>
    <input class="form-control" type="time" name="heure_max" value="{{ request.GET.heure_max }}">
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Type</label>
    <select class="form-select" name="type">
      <option value="">Tous</option>
      <option value="entree" {% if request.GET.type == 'entree' %}selected{% endif %}>Entrée</option>
      <option value="sortie" {% if request.GET.type == 'sortie' %}selected{% endif %}>Sortie</option>
    </select>
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Source</label>
    <select class="form-select" name="source">
      <option value="">Toutes</option>
      <option value="manuel" {% if request.GET.source == 'manuel' %}selected{% endif %}>Manuel</option>
      <option value="qr" {% if request.GET.source == 'qr' %}selected{% endif %}>QR Code</option>
      <option value="badgeuse" {% if request.GET.source == 'badgeuse' %}selected{% endif %}>Badgeuse</option>
    </select>
  </div>
  <div class="col">
    <label class="form-label fw-bold text-primary">Statut</label>
    <select class="form-select" name="statut">
      <option value="">Tous</option>
      <option value="present" {% if request.GET.statut == 'present' %}selected{% endif %}>Présent</option>
      <option value="retard" {% if request.GET.statut == 'retard' %}selected{% endif %}>Retard</option>
      <option value="absent" {% if request.GET.statut == 'absent' %}selected{% endif %}>Absent</option>
      <option value="depart_anticipe" {% if request.GET.statut == 'depart_anticipe' %}selected{% endif %}>Départ anticipé</option>
      <option value="sortie_respectee" {% if request.GET.statut == 'sortie_respectee' %}selected{% endif %}>Sortie respectée</option>
    </select>
  </div>
  <div class="col d-flex align-items-end justify-content-end">
    <button type="submit" class="btn btn-primary w-100" style="font-weight:bold;letter-spacing:1px;"><i class="bi bi-funnel"></i> Filtrer</button>
  </div>
</form>
